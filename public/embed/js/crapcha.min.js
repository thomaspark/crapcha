var crapcha={init:function(a){a.append('<div class="code"></div><div class="control"><input type="text" maxlength="20" placeholder="Type the text above"></input><label><span class="icon-021 reload btn"></span><a class="icon-05a info btn" href="http://crapcha.com" target="_blank" tabindex="-1"></a> <span class="logo">CRAPCHA<sup>&trade;</sup></span></label></div>').children(".control").children("input").keypress(this.send).end().find(".reload").css("user-select","none").click(function(){crapcha.populate(a)}),this.populate(a);var e={apiKey:"AIzaSyAvlVi3PMdwBXjAvUrGEtPj2wnQGvzkHEY",authDomain:"crapcha-7bee7.firebaseapp.com",databaseURL:"https://crapcha-7bee7.firebaseio.com",projectId:"crapcha-7bee7",storageBucket:"crapcha-7bee7.appspot.com",messagingSenderId:"354184007766"};firebase.initializeApp(e)},populate:function(a){var e=a.children(".code"),t=this.generate(5);e.empty();for(var n=0;n<t.length;n++)5===t[n].length?e.append("<span>&#x"+t[n]+";</span>"):3===t[n].length&&e.append('<span class="icon-'+t[n]+'"></span>');e.children().each(this.distort)},generate:function(a){for(var e=[],t,n,r=0;r<a;r++)n=Math.random(),n>.4?(t=this.randomize(382).toString(16),t=this.pad([t,5])):n>.2?(t=this.randomize(12351).toString(16),t=this.pad([t,5])):(t=this.randomize(270).toString(15),t=this.pad([t,3])),e.push(t);return e},distort:function(a){var e=$(this).parent().children().length,t=parseInt($(this).parent().height(),10);$(this).css({left:8+100*a/e+"%",position:"absolute","font-size":t-crapcha.randomize(20)+"px",transform:"rotateY("+crapcha.randomize(70)+"deg) rotate("+crapcha.randomize(360)+"deg)","user-select":"none"})},send:function(a){if(13===a.which&&$(this).val()&&$(this).val()!==crapcha.attempt){crapcha.attempt=$(this).val().substring(0,20);var e=$(this).parent().parent().children(".code");if(e.children("span").size()===e.find("*").size()&&0===e.find("[onload], [onunload], [onclick], [onmouseover], [onmouseout], [onmousedown], [onmouseup], [onkeypress], [onerror], [background], meta, img, svg, script, link, style, iframe, input").size()){firebase.database().ref("attempts").push().set({captcha:e.html(),attempt:crapcha.attempt,timestamp:firebase.database.ServerValue.TIMESTAMP},function(a){})}$(this).val(""),crapcha.populate($(this).parent().parent())}},randomize:function(a){return Math.floor(Math.random()*a)},pad:function(a){var e="00000"+a[0];return e.substr(e.length-a[1])}};crapcha.init($(".crapcha"));